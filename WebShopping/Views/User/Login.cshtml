
@{
    ViewBag.Title = "Đăng nhập | Đăng ký";
}

<main class="main-content">
    <div class="breadcrumb-area breadcrumb-height" style="background-image: url('/Content/assets/images/banner/bg2.jpg')">
        <div class="container h-100">
            <div class="row h-100">
                <div class="col-lg-12">
                    <div class="breadcrumb-item">
                        <h2 class="breadcrumb-heading">Đăng nhập | Đăng ký</h2>
                        <ul>
                            <li>
                                <a href="/home/index">Trang chủ <i class="pe-7s-angle-right"></i></a>
                            </li>
                            <li>Đăng nhập | Đăng ký</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="login-register-area section-space-y-axis-100">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div>
                        <div class="login-form">
                            <h4 class="login-title">Đăng nhập</h4>
                            <div class="row">
                                <div class="col-lg-12">
                                    <label>Email*</label>
                                    <input type="text" placeholder="Email" id="login_Email">
                                </div>
                                <div class="col-lg-12">
                                    <label>Mật khẩu</label>
                                    <input type="password" placeholder="Mật khẩu" id="login_Password">
                                </div>

                                <div class="col-lg-12 pt-5">
                                    <button onclick="Login();" class="btn btn-custom-size lg-size btn-secondary btn-primary-hover rounded-0">Đăng nhập</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 pt-10 pt-lg-0">
                    <div>
                        <div class="login-form">
                            <h4 class="login-title">Đăng ký</h4>
                            <div class="row">
                                <div class="col-md-12">
                                    <label>Họ và tên</label>
                                    <input type="text" placeholder="Họ và tên" id="register_Name">
                                </div>

                                <div class="col-md-12">
                                    <label>Email*</label>
                                    <input type="text" placeholder="Email" id="register_Email">
                                </div>
                                <div class="col-md-6">
                                    <label>Mật khẩu</label>
                                    <input type="password" placeholder="Mật khẩu" id="register_Password">
                                </div>
                                <div class="col-md-6">
                                    <label>Xác nhận mật khẩu</label>
                                    <input type="password" placeholder="Xác nhận mật khẩu" id="register_ConfirmPassword">
                                </div>
                                <div class="col-12">
                                    <button  onclick="Register();" class="btn btn-custom-size lg-size btn-secondary btn-primary-hover rounded-0">Đăng ký</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

@section scripts{
    <script>
        var Login = function () {
            var model = {
                Email: $('#login_Email').val(),
                Password: $('#login_Password').val()
            }

            if (model.Email === '') { alert('Email không được để trống'); return; }
            if (model.Password === '') { alert('Mật khẩu không được để trống'); return; }

            $.post('/user/loginpost', model, function (rs) {
                if (GetObjectProperty(rs, 'status') === Enum.ResponseStatus.ERROR) {
                    if (GetObjectProperty(rs, 'message') !== '') alert(GetObjectProperty(rs, 'message'));
                    return;
                }
                if (GetObjectProperty(rs, 'status') === Enum.ResponseStatus.SUCCESS) {
                    window.location.href = '/';
                }
            });
        }

        var Register = function () {
            var model = {
                Email: $('#register_Email').val(),
                Password: $('#register_Password').val(),
                Name: $('#register_Name').val(),
            }

            const confirmPassword = $('#register_ConfirmPassword').val();

            if (model.Email === '') { alert('Email không được để trống'); return; }
            if (model.Name === '') { alert('Họ và tên không được để trống'); return; }
            if (model.Password === '') { alert('Mật khẩu không được để trống'); return; }
            if (confirmPassword === '') { alert('Xác nhận mật khẩu không được để trống'); return; }

            if (model.Password !== confirmPassword) { alert('Xác nhận mật khẩu không khớp'); return; }

            $.post('/user/registerpost', model, function (rs) {
                if (GetObjectProperty(rs, 'status') === Enum.ResponseStatus.ERROR) {
                    if (GetObjectProperty(rs, 'message') !== '') alert(GetObjectProperty(rs, 'message'));
                    return;
                }
                if (GetObjectProperty(rs, 'status') === Enum.ResponseStatus.SUCCESS) {
                    alert('Đăng ký thành công!');
                    window.location.href = '/user/login';
                }
            });
        }
    </script>
}